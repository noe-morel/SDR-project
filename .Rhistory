mapdata <- map_data("france")
#view(mapdata)
#selection indicateurs
ind1 <- filter(synth_departemental, mesure == "Réduire la mortalité sur les routes")
#Join des deux tableaux
mapdata1 <- left_join(mapdata, ind1, by = c("region" = "libelle_departement"))
map2 <- mapdata1 + scale_fill_gradient(name="nombre de morts",low="green",high="red",na.value="gray")
#import carte de la France
mapdata <- map_data("france")
#view(mapdata)
#selection indicateurs
ind1 <- filter(synth_departemental, mesure == "Réduire la mortalité sur les routes")
#Join des deux tableaux
mapdata1 <- left_join(mapdata, ind1, by = c("region" = "libelle_departement"))
map2 <- map1 + scale_fill_gradient(name="nombre de morts",low="green",high="red",na.value="gray")
map2
plotly::ggplotly(map2)
#import carte de la France
mapdata <- map_data("france")
#view(mapdata)
#selection indicateurs
ind1 <- filter(synth_departemental, mesure == "Réduire la mortalité sur les routes")
#Join des deux tableaux
mapdata1 <- left_join(mapdata, ind1, by = c("region" = "libelle_departement"))
map2 <-  scale_fill_gradient(name="nombre de morts",low="green",high="red",na.value="gray")
map2
plotly::ggplotly(map2)
#import carte de la France
mapdata <- map_data("france")
#view(mapdata)
#selection indicateurs
ind1 <- filter(synth_departemental, mesure == "Réduire la mortalité sur les routes")
#Join des deux tableaux
mapdata1 <- left_join(mapdata, ind1, by = c("region" = "libelle_departement"))
map2 <- map1 + scale_fill_gradient(name="nombre de morts",low="green",high="red",na.value="gray")
map2
plotly::ggplotly(map2)
map1
map1 <- ggplot(mapdata, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")
map1
map3
mapdata <- map_data("france")
#view(mapdata)
ind1 <- filter(synth_departemental, mesure == "Réduire la mortalité sur les routes")
ind1
mapdata <- left_join(mapdata, ind1, by = c("region" = "libelle_departement"))
map1 <- ggplot(mapdata, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")
map1
plotly::ggplotly(map1)
map3 <- ggplot(mapdata, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "green")
map3
#import carte de la France
mapdata <- map_data("france")
#view(mapdata)
#selection indicateurs
ind1 <- filter(synth_departemental, mesure == "Réduire la mortalité sur les routes")
#Join des deux tableaux
mapdata1 <- left_join(mapdata, ind1, by = c("region" = "libelle_departement"))
map1 <- ggplot(mapdata1, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")
map2 <- map1 + scale_fill_gradient(name="nombre de morts",low="green",high="red",na.value="gray")
map2
plotly::ggplotly(map2)
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv")
mapReg <- left_join(mapdata2, reg_dep, by = "libelle_region")
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv")
mapReg <- left_join(mapdata2, reg_dep, by = region)
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv")
reg_dep
#mapReg <- left_join(mapdata2, reg_dep, by = region)
#mapReg
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv")
reg_dep
#mapReg <- left_join(mapdata2, reg_dep, by = region)
#mapReg
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv")
reg_dep
#mapReg <- left_join(mapdata2, reg_dep, by = region)
#mapReg
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv")
reg_dep
#mapReg <- left_join(mapdata2, reg_dep, by = region)
#mapReg
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv")
reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = region)
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv")
reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = region)
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv")
reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region"="region")
#mapReg
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv")
reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region"=" region")
#mapReg
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv")
reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = region)
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv")
reg_dep
#mapReg <- left_join(mapdata2, reg_dep, by = region)
#mapReg
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv")
view(reg_dep)
#mapReg <- left_join(mapdata2, reg_dep, by = region)
#mapReg
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv")
view(reg_dep)
mapReg <- left_join(mapdata2, reg_dep, by = region)
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv")
view(reg_dep)
#mapReg <- left_join(mapdata2, reg_dep, by = region)
#mapReg
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv",delim = ";")
view(reg_dep)
#mapReg <- left_join(mapdata2, reg_dep, by = region)
#mapReg
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv",delim = ";")
view(reg_dep)
mapReg <- left_join(mapdata2, reg_dep, by = region)
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv",delim = ";")
reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = region)
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv",delim = ";")
reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = region)
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv",delim = ";")
reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = region)
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv",delim = ";")
spec(reg_dep)
#mapReg <- left_join(mapdata2, reg_dep, by = region)
#mapReg
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv",delim = ";")
show_col_types = FALSE
spec(reg_dep)
#mapReg <- left_join(mapdata2, reg_dep, by = region)
#mapReg
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv",delim = ";")
cols(
departement = col_character(),
region = col_character(),
libelle_region = col_character()
)
spec(reg_dep)
#mapReg <- left_join(mapdata2, reg_dep, by = region)
#mapReg
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv",delim = ";",show_col_types = FALSE)
spec(reg_dep)
#mapReg <- left_join(mapdata2, reg_dep, by = region)
#mapReg
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv",delim = ";",show_col_types = FALSE)
spec(reg_dep)
#mapReg <- left_join(mapdata2, reg_dep, by = region)
#mapReg
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv",delim = ";",show_col_types = FALSE)
spec(reg_dep)
mapReg <- left_join(mapdata2, reg_dep, by = region)
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv",delim = ";",show_col_types = FALSE)
spec(reg_dep)
mapReg <- left_join(mapdata2, reg_dep, by = region)
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv",delim = ";",show_col_types = FALSE)
spec(reg_dep)
#mapReg <- left_join(mapdata2, reg_dep, by = region)
#mapReg
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv",delim = ";",show_col_types = FALSE)
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv",delim = ";")
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv")
spec(reg_dep)
#mapReg <- left_join(mapdata2, reg_dep, by = region)
#mapReg
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
reg_dep
#mapReg <- left_join(mapdata2, reg_dep, by = region)
#mapReg
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_region")
mapReg
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_region")
mapReg
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_region")
mapReg
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_region")
mapReg
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_region"))
mapReg
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_departement"))
mapReg
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_departement"))
ind2 <- filter(synth_regional, mesure == "Réduire la mortalité sur les routes")
ind2
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_departement"))
ind2 <- filter(synth_regional, mesure == "Réduire la mortalité sur les routes")
regfin <- left_join(mapdata2, ind2, by = c("region" = "libelle_region"))
map5 <- ggplot(regfin, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")
map5
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_departement"))
ind2 <- filter(synth_regional, mesure == "Réduire la mortalité sur les routes")
regfin <- left_join(mapdata2, ind2, by = c("region" = "libelle_region"))
regfin
#map5 <- ggplot(regfin, aes(x=long, y=lat, group=group)) +
#  geom_polygon(aes(fill=valeur_actuelle),color = "black")
#map5
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_departement"))
mapReg
ind2 <- filter(synth_regional, mesure == "Réduire la mortalité sur les routes")
regfin <- left_join(mapdata2, ind2, by = c("region" = "libelle_region"))
regfin
#map5 <- ggplot(regfin, aes(x=long, y=lat, group=group)) +
#  geom_polygon(aes(fill=valeur_actuelle),color = "black")
#map5
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_departement"))
ind2 <- filter(synth_regional, mesure == "Réduire la mortalité sur les routes")
regfin <- left_join(mapReg, ind2, by = c("region" = "libelle_region"))
regfin
#map5 <- ggplot(regfin, aes(x=long, y=lat, group=group)) +
#  geom_polygon(aes(fill=valeur_actuelle),color = "black")
#map5
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_departement"))
ind2 <- filter(synth_regional, mesure == "Réduire la mortalité sur les routes")
regfin <- left_join(mapReg, ind2, by = c("region" = "libelle_region"))
regfin
map5 <- ggplot(regfin, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")
map5
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_departement"))
ind2 <- filter(synth_regional, mesure == "Réduire la mortalité sur les routes")
regfin <- left_join(mapReg, ind2, by = c("region" = "libelle_region"))
regfin
#map5 <- ggplot(regfin, aes(x=long, y=lat, group=group)) +
#  geom_polygon(aes(fill=valeur_actuelle),color = "black")
#map5
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_departement"))
ind2 <- filter(synth_regional, mesure == "Réduire la mortalité sur les routes")
regfin <- left_join(mapReg, ind2, by = c("nom_region" = "libelle_region"))
regfin
#map5 <- ggplot(regfin, aes(x=long, y=lat, group=group)) +
#  geom_polygon(aes(fill=valeur_actuelle),color = "black")
#map5
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_departement"))
ind2 <- filter(synth_regional, mesure == "Réduire la mortalité sur les routes")
regfin <- left_join(mapReg, ind2, by = c("nom_region" = "libelle_region"))
regfin
map5 <- ggplot(regfin, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")
map5
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_departement"))
ind2 <- filter(synth_regional, mesure == "Réduire la mortalité sur les routes")
regfin <- left_join(mapReg, ind2, by = c("nom_region" = "libelle_region"))
regfin
map5 <- ggplot(regfin, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="nombre de morts",low="green",high="red",na.value="gray")
map5
mapdata3 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_departement"))
ind2 <- filter(synth_regional, mesure == "Réduire la mortalité sur les routes")
regfin <- left_join(mapReg, ind2, by = c("nom_region" = "libelle_region"))
regfin
map5 <- ggplot(regfin, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="nombre de morts",low="green",high="red",na.value="gray")
map5
plot(pressure)
#mapdata <- map_data("france")
#mapdata$region <- tolower(gsub(' ','-',mapdata$region))
#synthese_departemental$libelle_departement <- iconv(synthese_departemental$libelle_departement,to="ASCII//TRANSLIT")
#synthese_departemental$libelle_departement <- gsub("'","",synthese_departemental$libelle_departement)
#synthese_departemental$libelle_departement <- tolower(synthese_departemental$libelle_departement)
#synthese_departemental$libelle_departement <- tolower(gsub(' ','-',synthese_departemental$libelle_departement))
ind3 <- filter(synth_departemental, mesure == "Déployer Parcoursup")
regfin2 <- left_join(mapReg, ind3, by = c("nom_region" = "libelle_region"))
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_departement"))
ind2 <- filter(synth_regional, mesure == "Réduire la mortalité sur les routes")
regfin <- left_join(mapReg, ind2, by = c("nom_region" = "libelle_region"))
regfin
map5 <- ggplot(regfin, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="nombre de morts",low="green",high="red",na.value="gray")
map5
ind3 <- filter(synth_regional, mesure == "Déployer Parcoursup")
regfin2 <- left_join(mapReg, ind3, by = c("nom_region" = "libelle_region"))
map6 <- ggplot(regfin2, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="tx-réussite",low="green",high="red",na.value="gray")
map6
ind3 <- filter(synth_regional, mesure == "Déployer Parcoursup")
regfin2 <- left_join(mapReg, ind3, by = c("nom_region" = "libelle_region"))
regfin2
map6 <- ggplot(regfin2, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="tx-réussite",low="green",high="red",na.value="gray")
map6
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_departement"))
ind2 <- filter(synth_regional, mesure == "Réduire la mortalité sur les routes")
regfin <- left_join(mapReg, ind2, by = c("nom_region" = "libelle_region"))
regfin
map5 <- ggplot(regfin, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="nombre de morts",low="green",high="red",na.value="gray")
map5
ind3 <- filter(synth_regional, mesure == "Déployer Parcoursup")
ind3
regfin2 <- left_join(mapReg, ind3, by = c("nom_region" = "libelle_region"))
regfin2
map6 <- ggplot(regfin2, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="tx-réussite",low="green",high="red",na.value="gray")
map6
ind3 <- filter(synth_regional, mesure == "Déployer Parcoursup ")
ind3
regfin2 <- left_join(mapReg, ind3, by = c("nom_region" = "libelle_region"))
regfin2
map6 <- ggplot(regfin2, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="tx-réussite",low="green",high="red",na.value="gray")
map6
ind3 <- filter(synth_regional, indicateur == "Atteintes aux personnes dans les transports en commun")
ind3
regfin2 <- left_join(mapReg, ind3, by = c("nom_region" = "libelle_region"))
regfin2
map6 <- ggplot(regfin2, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="tx-réussite",low="green",high="red",na.value="gray")
map6
ind3 <- filter(synth_regional, indicateur == "Nombre d'amendes forfaitaires délictuelles dressées")
ind3
regfin2 <- left_join(mapReg, ind3, by = c("nom_region" = "libelle_region"))
regfin2
map6 <- ggplot(regfin2, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="tx-réussite",low="green",high="red",na.value="gray")
map6
ind4 <- filter(synth_regional, indicateur == "Taux de réussite aux examens de licence 1")
ind4
regfin3 <- left_join(mapReg, ind3, by = c("nom_region" = "libelle_region"))
regfin3
map7 <- ggplot(regfin3, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="tx-réussite",low="green",high="red",na.value="gray")
map7
ind4 <- filter(synth_regional, indicateur == "Taux de réussite aux examens de licence 1")
ind4
regfin3 <- left_join(mapReg, ind4, by = c("nom_region" = "libelle_region"))
regfin3
map7 <- ggplot(regfin3, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="tx-réussite",low="green",high="red",na.value="gray")
map7
ind4 <- filter(synth_departemental, indicateur == "Taux de réussite aux examens de licence 1")
ind4
regfin3 <- left_join(mapdata2, ind4, by = c("region" = "libelle_departement"))
regfin3
map7 <- ggplot(regfin3, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="tx-réussite",low="green",high="red",na.value="gray")
map7
ind4 <- filter(synth_departemental, indicateur == "Nombre de logements rénovés dans les villes moyennes (+ de 20 000 habitants)")
ind4
regfin3 <- left_join(mapdata2, ind4, by = c("region" = "libelle_departement") )
regfin3
map7 <- ggplot(regfin3, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="tx-réussite",low="green",high="red",na.value="gray")
map7
library("tidyverse")
library("plotly")
library(shiny)
library(maps)
detail_national = read_delim("barometre-resultats-detail-national.csv")
indicateur <- detail_national |>
select(id_indicateur) |>
distinct() |>
arrange(id_indicateur)
synthese_departemental <- readr::read_delim("barometre-resultats-synthese-departemental.csv", delim = ",", trim_ws = TRUE, show_col_types = FALSE)
mapdata <- map_data("france")
mapdata$region <- tolower(gsub(' ','-',mapdata$region))
synthese_departemental$libelle_departement <- iconv(synthese_departemental$libelle_departement,to="ASCII//TRANSLIT")
synthese_departemental$libelle_departement <- gsub("'","",synthese_departemental$libelle_departement)
synthese_departemental$libelle_departement <- tolower(synthese_departemental$libelle_departement)
synthese_departemental$libelle_departement <- tolower(gsub(' ','-',synthese_departemental$libelle_departement))
selectInput(
"indicateur1", label = "Indicateur",
choices = indicateur, selected = "taux-deploiement-fibre"
)
fluidRow(renderPlotly({
# create ggplot object
p <-
ggplot(
filter(detail_national, id_indicateur == input$indicateur1),
aes(x = date, y = valeur)
) +
geom_line() +
geom_point()
# wrap ggplot object with ggplotly
ggplotly(p)
}),
renderPlotly({
map2 <- ggplot(left_join(mapdata, filter(synthese_departemental, id_indicateur == input$indicateur1), by = c("region" = "libelle_departement")), aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black") +
scale_fill_gradient(name="nombre de morts",low="green",high="red",na.value="gray")
ggplotly(map2)
}))
ind3 <- filter(synth_regional, indicateur == "Nombre d'amendes forfaitaires délictuelles dressées")
ind3
regfin2 <- left_join(mapReg, ind3, by = c("nom_region" = "libelle_region"))
regfin2
map6 <- ggplot(regfin2, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="tx-réussite",low="coral",high="darkorchid4",na.value="gray")
map6
ind3 <- filter(synth_regional, indicateur == "Nombre d'amendes forfaitaires délictuelles dressées")
ind3
regfin2 <- left_join(mapReg, ind3, by = c("nom_region" = "libelle_region"))
regfin2
map6 <- ggplot(regfin2, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="tx-réussite",low="coral1",high="darkorchid4",na.value="gray")
map6
