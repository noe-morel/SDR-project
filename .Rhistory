mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv",delim = ";")
reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = region)
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv",delim = ";")
reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = region)
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv",delim = ";")
reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = region)
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv",delim = ";")
spec(reg_dep)
#mapReg <- left_join(mapdata2, reg_dep, by = region)
#mapReg
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv",delim = ";")
show_col_types = FALSE
spec(reg_dep)
#mapReg <- left_join(mapdata2, reg_dep, by = region)
#mapReg
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv",delim = ";")
cols(
departement = col_character(),
region = col_character(),
libelle_region = col_character()
)
spec(reg_dep)
#mapReg <- left_join(mapdata2, reg_dep, by = region)
#mapReg
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv",delim = ";",show_col_types = FALSE)
spec(reg_dep)
#mapReg <- left_join(mapdata2, reg_dep, by = region)
#mapReg
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv",delim = ";",show_col_types = FALSE)
spec(reg_dep)
#mapReg <- left_join(mapdata2, reg_dep, by = region)
#mapReg
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv",delim = ";",show_col_types = FALSE)
spec(reg_dep)
mapReg <- left_join(mapdata2, reg_dep, by = region)
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv",delim = ";",show_col_types = FALSE)
spec(reg_dep)
mapReg <- left_join(mapdata2, reg_dep, by = region)
mapdata2 <- map_data("france")
reg_dep <- read_delim("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv",delim = ";",show_col_types = FALSE)
spec(reg_dep)
#mapReg <- left_join(mapdata2, reg_dep, by = region)
#mapReg
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv",delim = ";",show_col_types = FALSE)
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv",delim = ";")
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/regions-et-departements-francais.csv")
spec(reg_dep)
#mapReg <- left_join(mapdata2, reg_dep, by = region)
#mapReg
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
reg_dep
#mapReg <- left_join(mapdata2, reg_dep, by = region)
#mapReg
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_region")
mapReg
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_region")
mapReg
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_region")
mapReg
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_region")
mapReg
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_region"))
mapReg
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_departement"))
mapReg
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_departement"))
ind2 <- filter(synth_regional, mesure == "Réduire la mortalité sur les routes")
ind2
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_departement"))
ind2 <- filter(synth_regional, mesure == "Réduire la mortalité sur les routes")
regfin <- left_join(mapdata2, ind2, by = c("region" = "libelle_region"))
map5 <- ggplot(regfin, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")
map5
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_departement"))
ind2 <- filter(synth_regional, mesure == "Réduire la mortalité sur les routes")
regfin <- left_join(mapdata2, ind2, by = c("region" = "libelle_region"))
regfin
#map5 <- ggplot(regfin, aes(x=long, y=lat, group=group)) +
#  geom_polygon(aes(fill=valeur_actuelle),color = "black")
#map5
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_departement"))
mapReg
ind2 <- filter(synth_regional, mesure == "Réduire la mortalité sur les routes")
regfin <- left_join(mapdata2, ind2, by = c("region" = "libelle_region"))
regfin
#map5 <- ggplot(regfin, aes(x=long, y=lat, group=group)) +
#  geom_polygon(aes(fill=valeur_actuelle),color = "black")
#map5
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_departement"))
ind2 <- filter(synth_regional, mesure == "Réduire la mortalité sur les routes")
regfin <- left_join(mapReg, ind2, by = c("region" = "libelle_region"))
regfin
#map5 <- ggplot(regfin, aes(x=long, y=lat, group=group)) +
#  geom_polygon(aes(fill=valeur_actuelle),color = "black")
#map5
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_departement"))
ind2 <- filter(synth_regional, mesure == "Réduire la mortalité sur les routes")
regfin <- left_join(mapReg, ind2, by = c("region" = "libelle_region"))
regfin
map5 <- ggplot(regfin, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")
map5
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_departement"))
ind2 <- filter(synth_regional, mesure == "Réduire la mortalité sur les routes")
regfin <- left_join(mapReg, ind2, by = c("region" = "libelle_region"))
regfin
#map5 <- ggplot(regfin, aes(x=long, y=lat, group=group)) +
#  geom_polygon(aes(fill=valeur_actuelle),color = "black")
#map5
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_departement"))
ind2 <- filter(synth_regional, mesure == "Réduire la mortalité sur les routes")
regfin <- left_join(mapReg, ind2, by = c("nom_region" = "libelle_region"))
regfin
#map5 <- ggplot(regfin, aes(x=long, y=lat, group=group)) +
#  geom_polygon(aes(fill=valeur_actuelle),color = "black")
#map5
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_departement"))
ind2 <- filter(synth_regional, mesure == "Réduire la mortalité sur les routes")
regfin <- left_join(mapReg, ind2, by = c("nom_region" = "libelle_region"))
regfin
map5 <- ggplot(regfin, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")
map5
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_departement"))
ind2 <- filter(synth_regional, mesure == "Réduire la mortalité sur les routes")
regfin <- left_join(mapReg, ind2, by = c("nom_region" = "libelle_region"))
regfin
map5 <- ggplot(regfin, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="nombre de morts",low="green",high="red",na.value="gray")
map5
mapdata3 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_departement"))
ind2 <- filter(synth_regional, mesure == "Réduire la mortalité sur les routes")
regfin <- left_join(mapReg, ind2, by = c("nom_region" = "libelle_region"))
regfin
map5 <- ggplot(regfin, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="nombre de morts",low="green",high="red",na.value="gray")
map5
plot(pressure)
#mapdata <- map_data("france")
#mapdata$region <- tolower(gsub(' ','-',mapdata$region))
#synthese_departemental$libelle_departement <- iconv(synthese_departemental$libelle_departement,to="ASCII//TRANSLIT")
#synthese_departemental$libelle_departement <- gsub("'","",synthese_departemental$libelle_departement)
#synthese_departemental$libelle_departement <- tolower(synthese_departemental$libelle_departement)
#synthese_departemental$libelle_departement <- tolower(gsub(' ','-',synthese_departemental$libelle_departement))
ind3 <- filter(synth_departemental, mesure == "Déployer Parcoursup")
regfin2 <- left_join(mapReg, ind3, by = c("nom_region" = "libelle_region"))
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_departement"))
ind2 <- filter(synth_regional, mesure == "Réduire la mortalité sur les routes")
regfin <- left_join(mapReg, ind2, by = c("nom_region" = "libelle_region"))
regfin
map5 <- ggplot(regfin, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="nombre de morts",low="green",high="red",na.value="gray")
map5
ind3 <- filter(synth_regional, mesure == "Déployer Parcoursup")
regfin2 <- left_join(mapReg, ind3, by = c("nom_region" = "libelle_region"))
map6 <- ggplot(regfin2, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="tx-réussite",low="green",high="red",na.value="gray")
map6
ind3 <- filter(synth_regional, mesure == "Déployer Parcoursup")
regfin2 <- left_join(mapReg, ind3, by = c("nom_region" = "libelle_region"))
regfin2
map6 <- ggplot(regfin2, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="tx-réussite",low="green",high="red",na.value="gray")
map6
mapdata2 <- map_data("france")
reg_dep <- read_csv("/Users/mlauvernier/Desktop/departements-france.csv")
#reg_dep
mapReg <- left_join(mapdata2, reg_dep, by = c("region" = "nom_departement"))
ind2 <- filter(synth_regional, mesure == "Réduire la mortalité sur les routes")
regfin <- left_join(mapReg, ind2, by = c("nom_region" = "libelle_region"))
regfin
map5 <- ggplot(regfin, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="nombre de morts",low="green",high="red",na.value="gray")
map5
ind3 <- filter(synth_regional, mesure == "Déployer Parcoursup")
ind3
regfin2 <- left_join(mapReg, ind3, by = c("nom_region" = "libelle_region"))
regfin2
map6 <- ggplot(regfin2, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="tx-réussite",low="green",high="red",na.value="gray")
map6
ind3 <- filter(synth_regional, mesure == "Déployer Parcoursup ")
ind3
regfin2 <- left_join(mapReg, ind3, by = c("nom_region" = "libelle_region"))
regfin2
map6 <- ggplot(regfin2, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="tx-réussite",low="green",high="red",na.value="gray")
map6
ind3 <- filter(synth_regional, indicateur == "Atteintes aux personnes dans les transports en commun")
ind3
regfin2 <- left_join(mapReg, ind3, by = c("nom_region" = "libelle_region"))
regfin2
map6 <- ggplot(regfin2, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="tx-réussite",low="green",high="red",na.value="gray")
map6
ind3 <- filter(synth_regional, indicateur == "Nombre d'amendes forfaitaires délictuelles dressées")
ind3
regfin2 <- left_join(mapReg, ind3, by = c("nom_region" = "libelle_region"))
regfin2
map6 <- ggplot(regfin2, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="tx-réussite",low="green",high="red",na.value="gray")
map6
ind4 <- filter(synth_regional, indicateur == "Taux de réussite aux examens de licence 1")
ind4
regfin3 <- left_join(mapReg, ind3, by = c("nom_region" = "libelle_region"))
regfin3
map7 <- ggplot(regfin3, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="tx-réussite",low="green",high="red",na.value="gray")
map7
ind4 <- filter(synth_regional, indicateur == "Taux de réussite aux examens de licence 1")
ind4
regfin3 <- left_join(mapReg, ind4, by = c("nom_region" = "libelle_region"))
regfin3
map7 <- ggplot(regfin3, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="tx-réussite",low="green",high="red",na.value="gray")
map7
ind4 <- filter(synth_departemental, indicateur == "Taux de réussite aux examens de licence 1")
ind4
regfin3 <- left_join(mapdata2, ind4, by = c("region" = "libelle_departement"))
regfin3
map7 <- ggplot(regfin3, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="tx-réussite",low="green",high="red",na.value="gray")
map7
ind4 <- filter(synth_departemental, indicateur == "Nombre de logements rénovés dans les villes moyennes (+ de 20 000 habitants)")
ind4
regfin3 <- left_join(mapdata2, ind4, by = c("region" = "libelle_departement") )
regfin3
map7 <- ggplot(regfin3, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="tx-réussite",low="green",high="red",na.value="gray")
map7
library("tidyverse")
library("plotly")
library(shiny)
library(maps)
detail_national = read_delim("barometre-resultats-detail-national.csv")
indicateur <- detail_national |>
select(id_indicateur) |>
distinct() |>
arrange(id_indicateur)
synthese_departemental <- readr::read_delim("barometre-resultats-synthese-departemental.csv", delim = ",", trim_ws = TRUE, show_col_types = FALSE)
mapdata <- map_data("france")
mapdata$region <- tolower(gsub(' ','-',mapdata$region))
synthese_departemental$libelle_departement <- iconv(synthese_departemental$libelle_departement,to="ASCII//TRANSLIT")
synthese_departemental$libelle_departement <- gsub("'","",synthese_departemental$libelle_departement)
synthese_departemental$libelle_departement <- tolower(synthese_departemental$libelle_departement)
synthese_departemental$libelle_departement <- tolower(gsub(' ','-',synthese_departemental$libelle_departement))
selectInput(
"indicateur1", label = "Indicateur",
choices = indicateur, selected = "taux-deploiement-fibre"
)
fluidRow(renderPlotly({
# create ggplot object
p <-
ggplot(
filter(detail_national, id_indicateur == input$indicateur1),
aes(x = date, y = valeur)
) +
geom_line() +
geom_point()
# wrap ggplot object with ggplotly
ggplotly(p)
}),
renderPlotly({
map2 <- ggplot(left_join(mapdata, filter(synthese_departemental, id_indicateur == input$indicateur1), by = c("region" = "libelle_departement")), aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black") +
scale_fill_gradient(name="nombre de morts",low="green",high="red",na.value="gray")
ggplotly(map2)
}))
ind3 <- filter(synth_regional, indicateur == "Nombre d'amendes forfaitaires délictuelles dressées")
ind3
regfin2 <- left_join(mapReg, ind3, by = c("nom_region" = "libelle_region"))
regfin2
map6 <- ggplot(regfin2, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="tx-réussite",low="coral",high="darkorchid4",na.value="gray")
map6
ind3 <- filter(synth_regional, indicateur == "Nombre d'amendes forfaitaires délictuelles dressées")
ind3
regfin2 <- left_join(mapReg, ind3, by = c("nom_region" = "libelle_region"))
regfin2
map6 <- ggplot(regfin2, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")+
scale_fill_gradient(name="tx-réussite",low="coral1",high="darkorchid4",na.value="gray")
map6
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(plotly)
detail_departemental <- readr::read_delim("barometre-resultats-detail-departemental.csv", delim = ",", trim_ws = TRUE, show_col_types = FALSE)
detail_regional <- readr::read_delim("barometre-resultats-detail-regional.csv", delim = ",", trim_ws = TRUE, show_col_types = FALSE)
detail_national <- readr::read_delim("barometre-resultats-detail-national.csv", delim = ",", trim_ws = TRUE, show_col_types = FALSE)
synthese_departemental <- readr::read_delim("barometre-resultats-synthese-departemental.csv", delim = ",", trim_ws = TRUE, show_col_types = FALSE)
synthese_regional <- readr::read_delim("barometre-resultats-synthese-regional.csv", delim = ",", trim_ws = TRUE, show_col_types = FALSE)
synthese_national <- readr::read_delim("barometre-resultats-synthese-national.csv", delim = ",", trim_ws = TRUE, show_col_types = FALSE)
reg_dep <- readr::read_delim("departements-france.csv", delim = ",", trim_ws = TRUE, show_col_types = FALSE)
mapdata <- map_data("france")
mapdata$region <- tolower(gsub(' ','-',mapdata$region))
synthese_departemental$libelle_departement <- iconv(synthese_departemental$libelle_departement,to="ASCII//TRANSLIT")
synthese_departemental$libelle_departement <- gsub("'","",synthese_departemental$libelle_departement)
synthese_departemental$libelle_departement <- tolower(synthese_departemental$libelle_departement)
synthese_departemental$libelle_departement <- tolower(gsub(' ','-',synthese_departemental$libelle_departement))
detail_departemental$libelle_departement <- iconv(detail_departemental$libelle_departement,to="ASCII//TRANSLIT")
detail_departemental$libelle_departement <- gsub("'","",detail_departemental$libelle_departement)
detail_departemental$libelle_departement <- tolower(detail_departemental$libelle_departement)
detail_departemental$libelle_departement <- tolower(gsub(' ','-',detail_departemental$libelle_departement))
mapdata <- map_data("france")
mapdata$region <- iconv(mapdata$region,to="ASCII//TRANSLIT")
mapdata$region <- gsub("'","",mapdata$region)
mapdata$region <- tolower(mapdata$region)
mapdata$region <- tolower(gsub(' ','-',mapdata$region))
UnJeuneNational <- detail_national |>
filter(mesure=="Plan 1 jeune 1 solution") |>
mutate(recrutés_par_mois = if_else(valeur>lag(valeur), valeur-lag(valeur), valeur, missing=valeur))|>
rename(recrutés_cumulés = valeur) |>
pivot_longer(c(recrutés_cumulés, recrutés_par_mois), names_to = "type", values_to = "valeur") |>
mutate(year = year(date)) |>
ggplot() +
geom_point(mapping=aes(x=date, y=valeur, fg=type)) +
labs(title = "Jeunes recrutés grâce au projet",
x = "Date",
y = "Nombre de recrutement")
plotly::ggplotly(UnJeuneNational)
UnJeuneNational <- detail_regional |>
filter(mesure=="Plan 1 jeune 1 solution" & month(date)==7) |>
mutate(year = year(date)) |>
ggplot() +
geom_col(mapping = aes(x=libelle_region, y=valeur, bg=libelle_region))+
theme(axis.text.x=element_blank(),axis.ticks.x=element_blank(),axis.title.x=element_blank())+
facet_wrap(vars(year), nrow=1)+
labs(title = "Jeunes recrutés grâce au projet par région",
x = "Date",
y = "Nombre de recrutement",
bg="Région")
plotly::ggplotly(UnJeuneNational)
UnJeuneIdF <- detail_regional |>
filter(mesure=="Plan 1 jeune 1 solution" & code_region=="11") |>
mutate(valeur_mois = if_else(valeur>lag(valeur), valeur-lag(valeur), valeur, missing=valeur))|>
mutate(year = year(date)) |>
ggplot() +
geom_point(mapping=aes(x=month(date), y=valeur_mois)) +
facet_wrap(vars(year), nrow=1)+
labs(title = "Jeunes recrutés grâce au projet en Île de France",
x = "Date",
y = "Nombre de recrutement")
plotly::ggplotly(UnJeuneIdF)
UnJeuneDepIdF <- detail_departemental |>
left_join(reg_dep, by = c("code_departement"="code_departement"))|>
filter(mesure=="Plan 1 jeune 1 solution" & code_region=="11")|>
mutate(valeur_mois = if_else(valeur>lag(valeur), valeur-lag(valeur), valeur, missing=valeur))|>
mutate(year = year(date)) |>
ggplot() +
geom_point(mapping=aes(x=month(date), y=valeur_mois))+
facet_grid(vars(nom_departement), vars(year), scales="fixed")
plotly::ggplotly(UnJeuneDepIdF)
#import carte de la France
#view(mapdata)
#selection indicateurs
ind1 <- filter(synthese_departemental, mesure == "Réduire la mortalité sur les routes")
#Join des deux tableaux
mapdata1 <- left_join(mapdata, ind1, by = c("region" = "libelle_departement"))
map1 <- ggplot(mapdata1, aes(x=long, y=lat, group=group)) +
geom_polygon(aes(fill=valeur_actuelle),color = "black")
map2 <- map1 + scale_fill_gradient(name="nombre de morts",low="green",high="red",na.value="gray")
map2
plotly::ggplotly(map2)
#mapdata3 <- map_data("france")
#reg_dep
mapReg <- left_join(mapdata3, reg_dep, by = c("region" = "nom_departement"))
View(mapdata)
View(mapdata)
View(synthese_departemental)
View(synthese_departemental)
View(detail_departemental)
View(mapdata1)
View(mapdata1)
library(tidyverse)
library(plotly)
library(shiny)
library(maps)
library(glue)
detail_national = read_delim("barometre-resultats-detail-national.csv")
indicateur <- detail_national |>
select(mesure,indicateur,id_indicateur,unite) |>
distinct(mesure,indicateur,id_indicateur,unite) |>
arrange(id_indicateur)
synthese_departemental <- readr::read_delim("barometre-resultats-synthese-departemental.csv", delim = ",", trim_ws = TRUE, show_col_types = FALSE)
mapdata <- map_data("france")
mapdata$region <- tolower(gsub(' ','-',mapdata$region))
synthese_departemental$libelle_departement <- iconv(synthese_departemental$libelle_departement,to="ASCII//TRANSLIT")
synthese_departemental$libelle_departement <- gsub("'","",synthese_departemental$libelle_departement)
synthese_departemental$libelle_departement <- tolower(synthese_departemental$libelle_departement)
synthese_departemental$libelle_departement <- tolower(gsub(' ','-',synthese_departemental$libelle_departement))
addline_format <- function(x){
if(length(as.character(x))>20)
x <- gsub("^(.{20})(.*)$",
"\\1\n\\2",
x)
returnValue(x)
}
View(mapdata)
View(synthese_departemental)
install.packages("colourpicker")
library(tidyverse)
library(plotly)
library(shiny)
library(maps)
library(glue)
library(colourpicker)
detail_national = read_delim("barometre-resultats-detail-national.csv")
indicateur <- detail_national |>
select(mesure,indicateur,id_indicateur,unite) |>
distinct(mesure,indicateur,id_indicateur,unite) |>
arrange(id_indicateur)
synthese_departemental <- readr::read_delim("barometre-resultats-synthese-departemental.csv", delim = ",", trim_ws = TRUE, show_col_types = FALSE)
mapdata <- map_data("france")
mapdata$region <- tolower(gsub(' ','-',mapdata$region))
synthese_departemental$libelle_departement <- iconv(synthese_departemental$libelle_departement,to="ASCII//TRANSLIT")
synthese_departemental$libelle_departement <- gsub("'","",synthese_departemental$libelle_departement)
synthese_departemental$libelle_departement <- tolower(synthese_departemental$libelle_departement)
synthese_departemental$libelle_departement <- tolower(gsub(' ','-',synthese_departemental$libelle_departement))
addline_format <- function(x){
if(length(as.character(x))>20)
x <- gsub("^(.{20})(.*)$",
"\\1\n\\2",
x)
returnValue(x)
}
